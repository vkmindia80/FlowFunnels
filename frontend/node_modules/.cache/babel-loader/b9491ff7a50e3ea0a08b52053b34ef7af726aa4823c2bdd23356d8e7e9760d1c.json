{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import api from'../utils/api';import{ArrowLeft,Save,Eye,Plus,Loader,Check}from'lucide-react';import ElementLibrary from'../components/builder/ElementLibrary';import FunnelCanvas from'../components/builder/FunnelCanvas';import PropertiesPanel from'../components/builder/PropertiesPanel';import{debounce}from'lodash';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FunnelBuilder=()=>{const{funnelId}=useParams();const navigate=useNavigate();const[funnel,setFunnel]=useState(null);const[pages,setPages]=useState([]);const[currentPage,setCurrentPage]=useState(null);const[elements,setElements]=useState([]);const[selectedElement,setSelectedElement]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[saved,setSaved]=useState(true);const[showAddPage,setShowAddPage]=useState(false);const[newPageName,setNewPageName]=useState('');useEffect(()=>{fetchFunnelData();},[funnelId]);useEffect(()=>{if(currentPage){setElements(currentPage.elements||[]);}},[currentPage]);const fetchFunnelData=async()=>{try{const[funnelRes,pagesRes]=await Promise.all([api.get(\"/api/funnels/\".concat(funnelId)),api.get(\"/api/funnels/\".concat(funnelId,\"/pages\"))]);setFunnel(funnelRes.data);setPages(pagesRes.data);if(pagesRes.data.length>0){setCurrentPage(pagesRes.data[0]);}}catch(error){console.error('Error fetching funnel:',error);}finally{setLoading(false);}};const createPage=async()=>{if(!newPageName.trim())return;try{const response=await api.post('/api/pages',{funnel_id:funnelId,name:newPageName});setShowAddPage(false);setNewPageName('');await fetchFunnelData();// Select the newly created page\nsetCurrentPage(response.data);}catch(error){console.error('Error creating page:',error);alert('Failed to create page');}};const savePage=async elementsToSave=>{if(!currentPage)return;setSaving(true);setSaved(false);try{await api.put(\"/api/pages/\".concat(currentPage.id),{elements:elementsToSave});setSaved(true);}catch(error){console.error('Error saving page:',error);alert('Failed to save page');}finally{setSaving(false);}};// Debounced auto-save\nconst debouncedSave=useCallback(debounce(elementsToSave=>{savePage(elementsToSave);},2000),[currentPage]);const handleElementsChange=newElements=>{setElements(newElements);setSaved(false);debouncedSave(newElements);};const handleManualSave=()=>{savePage(elements);};const switchPage=page=>{setCurrentPage(page);setSelectedElement(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500\"})});}if(pages.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"h-screen flex items-center justify-center bg-gray-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-dark rounded-2xl shadow-soft-lg border border-gray-200/50 p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br from-primary-100 to-primary-200 rounded-2xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Plus,{className:\"w-8 h-8 text-primary-600\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"No pages yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Create your first page to start building your funnel\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddPage(true),className:\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all shadow-lg shadow-primary-500/30 hover:shadow-xl hover:-translate-y-0.5 font-semibold\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 mr-2\"}),\"Create First Page\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"block w-full mt-3 px-6 py-3 glass-dark border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl transition-all shadow-soft\",children:\"Back to Dashboard\"})]}),showAddPage&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-dark rounded-2xl shadow-soft-lg border border-white/20 max-w-md w-full p-6 animate-scale-in backdrop-blur-xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-6\",children:\"Create New Page\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Page Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPageName,onChange:e=>setNewPageName(e.target.value),className:\"w-full px-4 py-3 bg-white/70 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all shadow-soft\",placeholder:\"e.g., Landing Page\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createPage,disabled:!newPageName.trim(),className:\"flex-1 px-4 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary-500/30 hover:shadow-xl hover:-translate-y-0.5 font-semibold\",children:\"Create Page\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddPage(false);setNewPageName('');},className:\"px-4 py-3 glass-dark border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl transition-all shadow-soft\",children:\"Cancel\"})]})]})})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",title:\"Back to Dashboard\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-5 h-5 text-gray-700\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold text-gray-800\",children:funnel===null||funnel===void 0?void 0:funnel.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:(currentPage===null||currentPage===void 0?void 0:currentPage.name)||'Select a page'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm\",children:[saving&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 mr-1.5 animate-spin\"}),\"Saving...\"]}),saved&&!saving&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-green-600\",children:[/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4 mr-1.5\"}),\"Saved\"]}),!saved&&!saving&&/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-600\",children:\"Unsaved changes\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleManualSave,disabled:saving||saved,className:\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all text-sm font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-1.5\"}),\"Save\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddPage(true),className:\"inline-flex items-center px-4 py-2 bg-white border border-gray-300 hover:border-primary-400 text-gray-700 rounded-lg transition-all text-sm font-medium\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-1.5\"}),\"Add Page\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 border-b border-gray-200 px-6 py-2 flex items-center gap-2 overflow-x-auto\",children:pages.map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>switchPage(page),className:\"px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap \".concat((currentPage===null||currentPage===void 0?void 0:currentPage.id)===page.id?'bg-white text-primary-600 shadow-sm':'text-gray-600 hover:bg-white/50'),children:page.name},page.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex overflow-hidden\",children:[/*#__PURE__*/_jsx(ElementLibrary,{}),/*#__PURE__*/_jsx(FunnelCanvas,{elements:elements,onElementsChange:handleElementsChange,selectedElement:selectedElement,setSelectedElement:setSelectedElement}),/*#__PURE__*/_jsx(PropertiesPanel,{selectedElement:selectedElement,elements:elements,onElementsChange:handleElementsChange})]}),showAddPage&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-dark rounded-2xl shadow-soft-lg border border-white/20 max-w-md w-full p-6 animate-scale-in backdrop-blur-xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-6\",children:\"Add New Page\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Page Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPageName,onChange:e=>setNewPageName(e.target.value),onKeyPress:e=>e.key==='Enter'&&createPage(),className:\"w-full px-4 py-3 bg-white/70 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all shadow-soft\",placeholder:\"e.g., Thank You Page\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createPage,disabled:!newPageName.trim(),className:\"flex-1 px-4 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary-500/30 hover:shadow-xl hover:-translate-y-0.5 font-semibold\",children:\"Add Page\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddPage(false);setNewPageName('');},className:\"px-4 py-3 glass-dark border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl transition-all shadow-soft\",children:\"Cancel\"})]})]})})]});};export default FunnelBuilder;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","api","ArrowLeft","Save","Eye","Plus","Loader","Check","ElementLibrary","FunnelCanvas","PropertiesPanel","debounce","jsx","_jsx","jsxs","_jsxs","FunnelBuilder","funnelId","navigate","funnel","setFunnel","pages","setPages","currentPage","setCurrentPage","elements","setElements","selectedElement","setSelectedElement","loading","setLoading","saving","setSaving","saved","setSaved","showAddPage","setShowAddPage","newPageName","setNewPageName","fetchFunnelData","funnelRes","pagesRes","Promise","all","get","concat","data","length","error","console","createPage","trim","response","post","funnel_id","name","alert","savePage","elementsToSave","put","id","debouncedSave","handleElementsChange","newElements","handleManualSave","switchPage","page","className","children","onClick","type","value","onChange","e","target","placeholder","disabled","title","map","onElementsChange","onKeyPress","key","autoFocus"],"sources":["/app/frontend/src/pages/FunnelBuilder.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../utils/api';\nimport { ArrowLeft, Save, Eye, Plus, Loader, Check } from 'lucide-react';\nimport ElementLibrary from '../components/builder/ElementLibrary';\nimport FunnelCanvas from '../components/builder/FunnelCanvas';\nimport PropertiesPanel from '../components/builder/PropertiesPanel';\nimport { debounce } from 'lodash';\n\nconst FunnelBuilder = () => {\n  const { funnelId } = useParams();\n  const navigate = useNavigate();\n  const [funnel, setFunnel] = useState(null);\n  const [pages, setPages] = useState([]);\n  const [currentPage, setCurrentPage] = useState(null);\n  const [elements, setElements] = useState([]);\n  const [selectedElement, setSelectedElement] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(true);\n  const [showAddPage, setShowAddPage] = useState(false);\n  const [newPageName, setNewPageName] = useState('');\n\n  useEffect(() => {\n    fetchFunnelData();\n  }, [funnelId]);\n\n  useEffect(() => {\n    if (currentPage) {\n      setElements(currentPage.elements || []);\n    }\n  }, [currentPage]);\n\n  const fetchFunnelData = async () => {\n    try {\n      const [funnelRes, pagesRes] = await Promise.all([\n        api.get(`/api/funnels/${funnelId}`),\n        api.get(`/api/funnels/${funnelId}/pages`)\n      ]);\n      setFunnel(funnelRes.data);\n      setPages(pagesRes.data);\n      if (pagesRes.data.length > 0) {\n        setCurrentPage(pagesRes.data[0]);\n      }\n    } catch (error) {\n      console.error('Error fetching funnel:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createPage = async () => {\n    if (!newPageName.trim()) return;\n\n    try {\n      const response = await api.post('/api/pages', {\n        funnel_id: funnelId,\n        name: newPageName\n      });\n      setShowAddPage(false);\n      setNewPageName('');\n      await fetchFunnelData();\n      // Select the newly created page\n      setCurrentPage(response.data);\n    } catch (error) {\n      console.error('Error creating page:', error);\n      alert('Failed to create page');\n    }\n  };\n\n  const savePage = async (elementsToSave) => {\n    if (!currentPage) return;\n\n    setSaving(true);\n    setSaved(false);\n    try {\n      await api.put(`/api/pages/${currentPage.id}`, {\n        elements: elementsToSave\n      });\n      setSaved(true);\n    } catch (error) {\n      console.error('Error saving page:', error);\n      alert('Failed to save page');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Debounced auto-save\n  const debouncedSave = useCallback(\n    debounce((elementsToSave) => {\n      savePage(elementsToSave);\n    }, 2000),\n    [currentPage]\n  );\n\n  const handleElementsChange = (newElements) => {\n    setElements(newElements);\n    setSaved(false);\n    debouncedSave(newElements);\n  };\n\n  const handleManualSave = () => {\n    savePage(elements);\n  };\n\n  const switchPage = (page) => {\n    setCurrentPage(page);\n    setSelectedElement(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500\"></div>\n      </div>\n    );\n  }\n\n  if (pages.length === 0) {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-gray-50 p-4\">\n        <div className=\"max-w-md w-full\">\n          <div className=\"glass-dark rounded-2xl shadow-soft-lg border border-gray-200/50 p-8 text-center\">\n            <div className=\"w-16 h-16 bg-gradient-to-br from-primary-100 to-primary-200 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n              <Plus className=\"w-8 h-8 text-primary-600\" />\n            </div>\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">No pages yet</h2>\n            <p className=\"text-gray-600 mb-6\">Create your first page to start building your funnel</p>\n            <button\n              onClick={() => setShowAddPage(true)}\n              className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all shadow-lg shadow-primary-500/30 hover:shadow-xl hover:-translate-y-0.5 font-semibold\"\n            >\n              <Plus className=\"w-5 h-5 mr-2\" />\n              Create First Page\n            </button>\n            <button\n              onClick={() => navigate('/dashboard')}\n              className=\"block w-full mt-3 px-6 py-3 glass-dark border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl transition-all shadow-soft\"\n            >\n              Back to Dashboard\n            </button>\n          </div>\n\n          {/* Add Page Modal */}\n          {showAddPage && (\n            <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in\">\n              <div className=\"glass-dark rounded-2xl shadow-soft-lg border border-white/20 max-w-md w-full p-6 animate-scale-in backdrop-blur-xl\">\n                <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-6\">\n                  Create New Page\n                </h2>\n                \n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    Page Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={newPageName}\n                    onChange={(e) => setNewPageName(e.target.value)}\n                    className=\"w-full px-4 py-3 bg-white/70 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all shadow-soft\"\n                    placeholder=\"e.g., Landing Page\"\n                  />\n                </div>\n\n                <div className=\"flex items-center gap-3 mt-6\">\n                  <button\n                    onClick={createPage}\n                    disabled={!newPageName.trim()}\n                    className=\"flex-1 px-4 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary-500/30 hover:shadow-xl hover:-translate-y-0.5 font-semibold\"\n                  >\n                    Create Page\n                  </button>\n                  <button\n                    onClick={() => {\n                      setShowAddPage(false);\n                      setNewPageName('');\n                    }}\n                    className=\"px-4 py-3 glass-dark border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl transition-all shadow-soft\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-white\">\n      {/* Top Header */}\n      <div className=\"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={() => navigate('/dashboard')}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            title=\"Back to Dashboard\"\n          >\n            <ArrowLeft className=\"w-5 h-5 text-gray-700\" />\n          </button>\n          <div>\n            <h1 className=\"text-lg font-bold text-gray-800\">{funnel?.name}</h1>\n            <p className=\"text-sm text-gray-500\">{currentPage?.name || 'Select a page'}</p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          {/* Save Status */}\n          <div className=\"flex items-center gap-2 text-sm\">\n            {saving && (\n              <span className=\"flex items-center text-gray-600\">\n                <Loader className=\"w-4 h-4 mr-1.5 animate-spin\" />\n                Saving...\n              </span>\n            )}\n            {saved && !saving && (\n              <span className=\"flex items-center text-green-600\">\n                <Check className=\"w-4 h-4 mr-1.5\" />\n                Saved\n              </span>\n            )}\n            {!saved && !saving && (\n              <span className=\"text-amber-600\">Unsaved changes</span>\n            )}\n          </div>\n\n          <button\n            onClick={handleManualSave}\n            disabled={saving || saved}\n            className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-all text-sm font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <Save className=\"w-4 h-4 mr-1.5\" />\n            Save\n          </button>\n\n          <button\n            onClick={() => setShowAddPage(true)}\n            className=\"inline-flex items-center px-4 py-2 bg-white border border-gray-300 hover:border-primary-400 text-gray-700 rounded-lg transition-all text-sm font-medium\"\n          >\n            <Plus className=\"w-4 h-4 mr-1.5\" />\n            Add Page\n          </button>\n        </div>\n      </div>\n\n      {/* Pages Tab Bar */}\n      <div className=\"bg-gray-50 border-b border-gray-200 px-6 py-2 flex items-center gap-2 overflow-x-auto\">\n        {pages.map((page) => (\n          <button\n            key={page.id}\n            onClick={() => switchPage(page)}\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${\n              currentPage?.id === page.id\n                ? 'bg-white text-primary-600 shadow-sm'\n                : 'text-gray-600 hover:bg-white/50'\n            }`}\n          >\n            {page.name}\n          </button>\n        ))}\n      </div>\n\n      {/* Main Editor Area */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Left: Element Library */}\n        <ElementLibrary />\n\n        {/* Center: Canvas */}\n        <FunnelCanvas\n          elements={elements}\n          onElementsChange={handleElementsChange}\n          selectedElement={selectedElement}\n          setSelectedElement={setSelectedElement}\n        />\n\n        {/* Right: Properties Panel */}\n        <PropertiesPanel\n          selectedElement={selectedElement}\n          elements={elements}\n          onElementsChange={handleElementsChange}\n        />\n      </div>\n\n      {/* Add Page Modal */}\n      {showAddPage && (\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in\">\n          <div className=\"glass-dark rounded-2xl shadow-soft-lg border border-white/20 max-w-md w-full p-6 animate-scale-in backdrop-blur-xl\">\n            <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-6\">\n              Add New Page\n            </h2>\n            \n            <div>\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                Page Name\n              </label>\n              <input\n                type=\"text\"\n                value={newPageName}\n                onChange={(e) => setNewPageName(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && createPage()}\n                className=\"w-full px-4 py-3 bg-white/70 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all shadow-soft\"\n                placeholder=\"e.g., Thank You Page\"\n                autoFocus\n              />\n            </div>\n\n            <div className=\"flex items-center gap-3 mt-6\">\n              <button\n                onClick={createPage}\n                disabled={!newPageName.trim()}\n                className=\"flex-1 px-4 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary-500/30 hover:shadow-xl hover:-translate-y-0.5 font-semibold\"\n              >\n                Add Page\n              </button>\n              <button\n                onClick={() => {\n                  setShowAddPage(false);\n                  setNewPageName('');\n                }}\n                className=\"px-4 py-3 glass-dark border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl transition-all shadow-soft\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FunnelBuilder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}